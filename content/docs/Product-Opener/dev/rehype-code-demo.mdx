---
title: Rehype Code Demo
description: Demonstration of syntax highlighting features
---

import { Callout } from 'fumadocs-ui/components/callout';

# Enhanced Code Block Demo

This page demonstrates the enhanced code block features now available with the Fumadocs CodeBlock components.

<Callout type="info">
**New Enhanced Features**

The code blocks now include:
- **Copy button** for easy copying
- **Custom titles** and icons
- **Enhanced syntax highlighting** with Shiki
- **Multiple theme support** (light/dark)
- **Improved accessibility** and user experience
</Callout>

## Basic Code Blocks

### JavaScript/TypeScript

```js title="Basic JavaScript"
function greetUser(name) {
  console.log(`Hello, ${name}!`);
  return `Welcome to Open Food Facts, ${name}`;
}

greetUser('Developer');
```

```typescript title="TypeScript with interfaces"
interface Product {
  id: string;
  name: string;
  barcode?: string;
  nutritionGrade: 'a' | 'b' | 'c' | 'd' | 'e';
}

async function fetchProduct(id: string): Promise<Product> {
  const response = await fetch(`/api/products/${id}`);
  return response.json();
}
```

### Shell/Bash Commands

```bash title="Development Setup"
# Clone the repository
git clone https://github.com/openfoodfacts/openfoodfacts-server.git

# Install dependencies
cd openfoodfacts-server
npm install

# Start development server
npm run dev
```

### Python Code

```python title="Data Processing Script"
import json
import requests

def get_product_data(barcode):
    """Fetch product data from Open Food Facts API"""
    url = f"https://world.openfoodfacts.org/api/v0/product/{barcode}.json"
    
    try:
        response = requests.get(url)
        response.raise_for_status()
        return response.json()
    except requests.RequestException as e:
        print(f"Error fetching product {barcode}: {e}")
        return None

# Example usage
product = get_product_data("3017620422003")
if product and product['status']:
    print(f"Product: {product['product']['product_name']}")
```

### Perl Code (for OFF contributors)

```perl title="Product Processing"
#!/usr/bin/perl -w

use Modern::Perl '2017';
use ProductOpener::Config qw/:all/;
use ProductOpener::Products qw/:all/;

sub process_product_image {
    my $product_ref = shift;
    my $image_path = shift;
    
    if (-e $image_path) {
        $product_ref->{images} //= {};
        $product_ref->{images}{front} = {
            uploaded_t => time(),
            uploader => 'system'
        };
        
        return 1;
    }
    
    return 0;
}
```

### Configuration Files

```ini title="Configuration"
[database]
host = localhost
port = 5432
name = off_products
user = off_user

[api]
rate_limit = 1000
cache_ttl = 3600
enable_cors = true
```

```yaml title="Docker Compose"
version: '3.8'
services:
  web:
    build: .
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=development
    volumes:
      - .:/app
      - /app/node_modules
    depends_on:
      - database
  
  database:
    image: postgres:15
    environment:
      POSTGRES_DB: off_products
      POSTGRES_USER: off_user
      POSTGRES_PASSWORD: off_password
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  postgres_data:
```

### JSON API Response

```json title="Product API Response"
{
  "code": "3017620422003",
  "product": {
    "product_name": "Nutella",
    "brands": "Ferrero",
    "categories": "Spreads, Sweet spreads",
    "nutrition_grades": "e",
    "nutriments": {
      "energy-kcal_100g": 539,
      "fat_100g": 30.9,
      "saturated-fat_100g": 10.6,
      "sugars_100g": 56.3,
      "salt_100g": 0.107
    },
    "ingredients_text": "Sugar, palm oil, hazelnuts, skimmed milk powder..."
  },
  "status": 1,
  "status_verbose": "product found"
}
```

## Inline Code Highlighting

You can also highlight inline code like `console.log('Hello'){:js}` or `SELECT * FROM products{:sql}` or even `git commit -m "feature"{:bash}`.

## Code with Line Numbers

You can enable line numbers by adding the appropriate meta:

```javascript
// This would show line numbers if configured
function calculateNutriScore(nutriments) {
  const energy = nutriments['energy-kcal_100g'] || 0;
  const saturatedFat = nutriments['saturated-fat_100g'] || 0;
  const sugars = nutriments['sugars_100g'] || 0;
  const sodium = nutriments['sodium_100g'] || 0;
  
  // Simplified calculation
  let score = 0;
  if (energy > 335) score += 10;
  if (saturatedFat > 1) score += 10;
  if (sugars > 4.5) score += 10;
  if (sodium > 90) score += 10;
  
  return score < 10 ? 'a' : score < 20 ? 'b' : score < 30 ? 'c' : score < 40 ? 'd' : 'e';
}
```

<Callout type="info">
**Note**: The syntax highlighting is powered by Shiki, which provides excellent highlighting for many programming languages. The themes automatically adapt to your site's dark/light mode.
</Callout>

## Features Enabled

- ✅ **Syntax Highlighting**: Multiple languages supported
- ✅ **Title Support**: Add titles to code blocks with `title="filename"`
- ✅ **Theme Support**: Automatic dark/light mode switching
- ✅ **Copy Button**: Built-in copy-to-clipboard functionality
- ✅ **Inline Code**: Syntax highlighting for inline code blocks
- ✅ **Language Icons**: Automatic icons based on language
- ✅ **Line Numbers**: Configurable line numbering
- ✅ **Meta String Parsing**: Support for custom metadata

## Supported Languages

The configuration includes support for:
- JavaScript/TypeScript (+ JSX/TSX)
- Python
- Perl (important for OFF development)
- Bash/Shell
- JSON/YAML
- INI configuration files
- Markdown
- And many more through Shiki's extensive language support
